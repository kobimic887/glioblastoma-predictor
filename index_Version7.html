<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IN THE NEWS - KOBI INC</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #ffffff;
            color: #000000;
            line-height: 1.5;
        }

        /* Header */
        .header {
            background: #ffffff;
            padding: 20px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 32px;
            font-weight: 700;
            color: #000000;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .nav {
            display: flex;
            list-style: none;
            gap: 40px;
        }

        .nav a {
            color: #000000;
            text-decoration: none;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 14px;
            transition: opacity 0.3s ease;
        }

        .nav a:hover {
            opacity: 0.7;
        }

        /* Main Content */
        .main-content {
            padding: 60px 0;
        }

        .page-title {
            font-size: 48px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 20px;
            color: #000000;
        }

        .smiles-button {
            background: #000000;
            color: #ffffff;
            border: none;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            margin-bottom: 40px;
            transition: background-color 0.3s ease;
        }

        .smiles-button:hover {
            background: #333333;
        }

        /* News Items */
        .news-item {
            margin-bottom: 60px;
            padding-bottom: 40px;
            border-bottom: 1px solid #e0e0e0;
        }

        .news-item:last-child {
            border-bottom: none;
        }

        .news-date {
            font-size: 14px;
            color: #666666;
            margin-bottom: 8px;
        }

        .news-title {
            font-size: 24px;
            font-weight: 600;
            color: #000000;
            margin-bottom: 16px;
            line-height: 1.3;
        }

        .news-excerpt {
            font-size: 16px;
            color: #333333;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .read-more {
            color: #000000;
            text-decoration: none;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 14px;
            transition: opacity 0.3s ease;
        }

        .read-more:hover {
            opacity: 0.7;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal.open {
            display: flex;
        }

        .modal-content {
            background: #ffffff;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            background: #000000;
            color: #ffffff;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .close-btn {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 24px;
            cursor: pointer;
        }

        .modal-body {
            padding: 30px;
        }

        /* Form Elements */
        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #000000;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 14px;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #000000;
        }

        .examples-section {
            background: #f5f5f5;
            padding: 20px;
            margin-bottom: 20px;
        }

        .examples-title {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
            color: #000000;
        }

        .example-item {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            padding: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-bottom: 4px;
        }

        .example-item:hover {
            background: #e0e0e0;
        }

        .predict-button {
            width: 100%;
            padding: 15px;
            background: #000000;
            color: #ffffff;
            border: none;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .predict-button:hover:not(:disabled) {
            background: #333333;
        }

        .predict-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Loading, Error, Results */
        .loading,
        .error,
        .results {
            display: none;
            margin-top: 20px;
        }

        .loading {
            text-align: center;
            padding: 20px;
        }

        .spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #e0e0e0;
            border-top-color: #000000;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error {
            padding: 15px;
            background: #ffebee;
            border: 1px solid #f44336;
            color: #c62828;
        }

        .results {
            background: #f5f5f5;
            padding: 20px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .result-card {
            background: #ffffff;
            padding: 15px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        .result-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #666666;
            margin-bottom: 5px;
        }

        .result-value {
            font-size: 20px;
            font-weight: 700;
            color: #000000;
        }

        .smiles-display {
            background: #ffffff;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            word-break: break-all;
            border: 1px solid #e0e0e0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }

            .nav {
                gap: 20px;
            }

            .page-title {
                font-size: 32px;
            }

            .modal-content {
                width: 95%;
                margin: 20px;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">KOBI INC</div>
                <nav>
                    <ul class="nav">
                        <li><a href="#">HOME</a></li>
                        <li><a href="#">NEWS</a></li>
                        <li><a href="#">SCIENCE</a></li>
                        <li><a href="#">TEAM</a></li>
                        <li><a href="#">CONTACT</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container main-content">
        <h1 class="page-title">IN THE NEWS</h1>
        
        <button class="smiles-button" onclick="openModal()">
            <i class="fas fa-microscope"></i> SMILES PREDICTOR
        </button>

        <!-- News Items -->
        <div class="news-item">
            <div class="news-date">10/9/2024</div>
            <h2 class="news-title">Kobi Inc Founder Awarded Breakthrough Prize in Drug Discovery</h2>
            <p class="news-excerpt">Our scientific founder has been recognized for pioneering work in computational drug design. The science behind Kobi's mission builds directly upon this original discovery by applying advanced computational approaches to design novel, chemically diverse compounds to target previously undruggable proteins.</p>
            <a href="#" class="read-more">READ MORE</a>
        </div>

        <div class="news-item">
            <div class="news-date">6/4/2024</div>
            <h2 class="news-title">Kobi Inc Expands Series A Financing to $71 Million to Advance Computational Drug Design</h2>
            <p class="news-excerpt">Kobi Inc announced today that it has expanded its Series A financing to $71 million, led by Arch Venture Partners with participation from Menlo Ventures, Madrona Venture Group, and Altitude Life Science Ventures. The funding will accelerate the development of Kobi's computational platform for designing novel therapeutics.</p>
            <a href="#" class="read-more">READ MORE</a>
        </div>

        <div class="news-item">
            <div class="news-date">4/25/2024</div>
            <h2 class="news-title">Kobi Inc Announces New Publication in Science Validating Foundational Approach</h2>
            <p class="news-excerpt">Kobi Inc announced a new publication in Science validating the foundational approach to design of novel chemically diverse compounds. The study demonstrates breakthrough computational methods for creating entirely new classes of therapeutic molecules.</p>
            <a href="#" class="read-more">READ MORE</a>
        </div>
    </main>

    <!-- SMILES Predictor Modal -->
    <div class="modal" id="smilesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">DRUG SENSITIVITY PREDICTOR</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="smilesInput" class="input-label">SMILES STRING</label>
                    <input 
                        type="text" 
                        id="smilesInput" 
                        class="input-field"
                        placeholder="Enter molecular SMILES notation..."
                        autocomplete="off"
                    >
                </div>

                <div class="examples-section">
                    <h4 class="examples-title">EXAMPLE COMPOUNDS</h4>
                    <div class="example-item" onclick="setSMILES('CN1C=NC2=C1C(=O)N(C(=O)N2C)C')">
                        <strong>Caffeine:</strong> CN1C=NC2=C1C(=O)N(C(=O)N2C)C
                    </div>
                    <div class="example-item" onclick="setSMILES('CC(C)CC1=CC=C(C=C1)C(C)C(=O)O')">
                        <strong>Ibuprofen:</strong> CC(C)CC1=CC=C(C=C1)C(C)C(=O)O
                    </div>
                    <div class="example-item" onclick="setSMILES('CC1=CC=C(C=C1)C2=CC(=NN2C3=CC=C(C=C3)S(=O)(=O)N)C(F)(F)F')">
                        <strong>Celecoxib:</strong> CC1=CC=C(C=C1)C2=CC(=NN2C3=CC=C(C=C3)S(=O)(=O)N)C(F)(F)F
                    </div>
                </div>

                <button class="predict-button" onclick="predictSensitivity()">
                    ANALYZE COMPOUND
                </button>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Analyzing molecular structure...</p>
                </div>

                <div class="error" id="error">
                    <span id="errorMessage"></span>
                </div>

                <div class="results" id="results">
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-label">IC50 PREDICTION</div>
                            <div class="result-value" id="ic50Value">-</div>
                            <small>Î¼M</small>
                        </div>
                        <div class="result-card">
                            <div class="result-label">SENSITIVITY SCORE</div>
                            <div class="result-value" id="sensitivityScore">-</div>
                        </div>
                    </div>
                    <div class="smiles-display">
                        <strong>ANALYZED SMILES:</strong> <span id="analyzedSmiles">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'http://152.42.134.22:5000';

        function openModal() {
            document.getElementById('smilesModal').classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('smilesModal').classList.remove('open');
            document.body.style.overflow = 'auto';
            resetModal();
        }

        function resetModal() {
            document.getElementById('smilesInput').value = '';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'none';
            document.getElementById('results').style.display = 'none';
            document.querySelector('.predict-button').disabled = false;
        }

        function setSMILES(smiles) {
            const input = document.getElementById('smilesInput');
            input.value = smiles;
            input.focus();
        }

        function showLoading() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('error').style.display = 'none';
            document.getElementById('results').style.display = 'none';
            document.querySelector('.predict-button').disabled = true;
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
            document.querySelector('.predict-button').disabled = false;
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            document.getElementById('errorMessage').textContent = message;
            errorDiv.style.display = 'block';
            document.getElementById('results').style.display = 'none';
        }

        function showResults(data) {
            document.getElementById('ic50Value').textContent = data.prediction.ic50_prediction.toFixed(3);
            document.getElementById('sensitivityScore').textContent = data.prediction.sensitivity_score.toFixed(4);
            document.getElementById('analyzedSmiles').textContent = data.smiles;
            document.getElementById('results').style.display = 'block';
            document.getElementById('error').style.display = 'none';
        }

        async function predictSensitivity() {
            const smilesInput = document.getElementById('smilesInput').value.trim();
            
            if (!smilesInput) {
                showError('Please enter a SMILES string');
                return;
            }
            
            showLoading();
            
            try {
                const response = await fetch(`${API_BASE_URL}/predict`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        smiles: smilesInput
                    }),
                    mode: 'cors'
                });
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    showResults(data);
                } else {
                    showError('Prediction failed. Please check your SMILES string and try again.');
                }
                
            } catch (error) {
                console.error('Error:', error);
                
                if (error.name === 'TypeError' && error.message.includes('fetch')) {
                    showError('CORS Error: Cannot connect to backend server.');
                } else if (error.message.includes('CORS')) {
                    showError('CORS Error: Please add CORS support to your backend.');
                } else {
                    showError(`Connection Error: ${error.message}`);
                }
            } finally {
                hideLoading();
            }
        }

        // Event listeners
        document.getElementById('smilesInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                predictSensitivity();
            }
        });

        document.getElementById('smilesModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('smilesModal').classList.contains('open')) {
                closeModal();
            }
        });
    </script>
</body>
</html>